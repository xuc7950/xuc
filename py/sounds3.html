<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
    <meta charset="utf-8">
    <title>配乐素材下载 - 库3</title>
    <style media="screen">
    th{
      text-align:left;
      font-size:4em;
      color:red;
    }
    td{
      font-size: 2.5em;
    }
    #top{
      opacity: 0.6;
      background: gray;
      font-size:4em;
      color:white;
      position: fixed;
      top:90%;
      left:87%;
      border-radius: 10px;
    }
    #jump{
      opacity: 0.6;
      background: gray;
      font-size:3.5em;
      color:white;
      position: fixed;
      top:80%;
      left:87%;
      border-radius: 10px;
    }
    #shuru{
      width:70%;
      height:100px;
      opacity: 0.8;
      background: none;
      font-size:3.5em;
      color:white;
      position: fixed;
      top:80%;
      left:15%;
      border-radius: 10px;
    }
    #libs{
      opacity: 0.8;
      background: none;
      font-size:3em;
      color:yellow;
      position: fixed;
      top:70%;
      left:85%;
      border-radius: 10px;
    }
    .btn{
      width:45%;
      height:100px;
      margin: 10px;
      font-size: 4em;
      background: #555499;
      color:white;
      border-radius: 10px;
    }
    </style>
    <script id="lib" src="配乐3.json"></script>
    <script type="text/javascript">
      var n = 8698;

    function inb(){
      var t = 0;
      var fade = window.setInterval(function(){
        var bo = document.getElementsByTagName("body")[0];
        bo.style.opacity = t;
        if (t<1){ t+=0.1;}else{clearInterval(fade);}
      },200);
    }

    function sp(url){
      document.getElementById('audio').src = url;
      document.getElementById('audio').play();
    }

    function tihuan(){
      document.getElementById('curPage').innerHTML = curPage;
        //清空
        document.getElementById('show').innerHTML = "";
        //开始替换
        var title ="<tr style='background:darkgray;opacity:0.8;border-radius:10px;'><th scope='col'>描述</th><th scope='col'>操作</th></tr>";
        document.getElementById('show').innerHTML += title;
          for(var i=(curPage-1)*50;i<curPage*50;i++){
            if (i==0) continue;
            content = "<tr style='color:white;'><td>"+p.describe[i]+"</td><td>"+"<input type='button' value='播放' onclick=\"if(this.style.color=='gray'){this.style.color='white'}else{this.style.color='gray'};sp('"+p.url[i]+"')\" id='p"+i+"' style='font-size:1em;border-radius:10px;background:none;color:white;'>"+"&emsp;<a href='"+p.url[i]+"' target='view_window'>下载</a>"+"</td></tr>";
            document.getElementById('show').innerHTML += content;
          }
        }


    window.onload = function(){
      var curPage = 1;
        for(var i=0;i<50;i++){
          if (i==0) continue;
          content = "<tr style='color:white;'><td>"+p.describe[i]+"</td><td>"+"<input type='button' value='播放' onclick=\"if(this.style.color=='gray'){this.style.color='white'}else{this.style.color='gray'};sp('"+p.url[i]+"')\" id='p"+i+"' style='font-size:1em;border-radius:10px;background:none;color:white;'>"+"&emsp;<a href='"+p.url[i]+"' target='view_window'>下载</a>"+"</td></tr>";
          document.getElementById('show').innerHTML += content;
        }
        document.getElementById('curPage').innerHTML = curPage;
        inb();
      }


          //向左
        function changeL(){
          //改变数字
          if (curPage>=1){
            curPage--;
            }
          tihuan();
          }

          //向右
        function changeR(){
          //改变数字
          if (curPage<102){
            curPage++;
            tihuan();
            inb();
            }
          }

          function jump(){
            var page = $("#pageInput").val();
            curPage = page;
            tihuan();
            inb();
          }
		  
		  function search(sText){
			var sDoneUrl = [];
			var sDoneDes = [];
			var j = 0;	//存储搜索结果长度/索引
				for(var i=0;i<n;i++){
					if (p.describe[i].match(sText.value) != null ){
						sDoneDes[j] = p.describe[i];
						sDoneUrl[j] = p.url[i];
						j++;
					}
				}
				
				document.getElementById("indexButtom").style.display = "none";
				document.getElementById('curPage').innerHTML = '1';
				//清空
				document.getElementById('show').innerHTML = "";
				//开始替换
				var title ="<tr style='background:darkgray;opacity:0.8;border-radius:10px;'><th scope='col'>描述</th><th scope='col'>操作</th></tr><tr style='font-size:1em;'><td>共搜索到"+j+"条音效</td></tr>";
				var search = "<tr><td><input type='text' id='search' style='width:100%;height:50px;font-size:0.9em;opacity:0.8;border-radius:10px;'/></td><td><input type='button' id='searchEnter' onclick='search(document.getElementById(\"search\"))' style='width:80%;float:right;height:70px;font-size:0.9em;background:gray;opacity:0.8;border-radius:10px;' value='查  找'/></td></tr>";
				document.getElementById('show').innerHTML += title+search;

				if (sText.value != ""){ 				 
					for(var i=0;i<j;i++){
						content = "<tr style='color:white;'><td>"+sDoneDes[i]+"</td><td>"+"<input type='button' value='播放' onclick=\"if(this.style.color=='gray'){this.style.color='white'}else{this.style.color='gray'};sp('"+sDoneUrl[i]+"')\" id='p"+i+"' style='font-size:1em;border-radius:10px;background:none;color:white;'>"+"&emsp;<a href='"+sDoneUrl[i]+"' target='view_window'>下载</a>"+"</td></tr>";
						document.getElementById('show').innerHTML += content;
					}
				}else{
					document.getElementById('show').innerHTML += "<td>请输入...</td>";
				}
		  }
		  function conSearch(e){
			if (e.keyCode == 13)
				search(document.getElementById('search'));
		  }
    </script>
  </head>
  <body style="background:url('bg.png');opacity:0;" vlink="green" alink="yellow" onkeypress="conSearch(window.event)">
    <audio autoplay id="audio">
      <source id="pl" type="audio/mpeg">
    </audio>


    <marquee style="color:red;font-size:30px;">资 源 由 <a href="mailto:xuc7950@foxmail.com">Xuchao</a> 免 费 提 供 ， 敬 请 放 心 下 载 。 该 库 共 8 6 9 8 条 音 效 </marquee>
    <div id="libs" onclick="location.href='sounds.html'">切换库</div>
    <div id="shuru" style="display:none;"><input id="pageInput" placeholder="0~101" type="text" style="height:100%;width:70%;font-size:55px;border-radius:12px;">
      <input type="button" value="跳转" onclick="jump()" style="height:100%;width:25%;font-size:55px;border-radius:12px;"/></div>
    <div id="jump" onclick="$('#shuru').slideToggle(1000);">直达</div>
    <div id='top'><a href="#show" style="text-decoration:none;color:white;">TOP</a></div>
    <table id="show" align="center">
      <tr align="center">
        <th scope="col"  style="background:darkgray;opacity:0.8;border-radius:10px;">描述</th>
        <th scope="col" style="background:darkgray;opacity:0.8;border-radius:10px;">操作</th>
      </tr>
	  <tr>
		<td>
			<input type="text" id="search" style="width:100%;height:50px;font-size:0.9em;opacity:0.8;border-radius:10px;"/>
		</td>
		<td>
			<input type="button" id="searchEnter" onclick="search(document.getElementById('search'))" style="width:80%;float:right;height:70px;font-size:0.9em;background:gray;opacity:0.8;border-radius:10px;" value="查  找"/>
		</td>
	  </tr>


    </table>
    <br/>
<div align="center" id="indexButtom">
<span id="pageNum" style="color:white;font-size:3em;text-align:center;">
<a href="javascript:changeL()" style="text-decoration:none;"> < < < </a>
&emsp;<a id="curPage"> </a>&emsp;
<a href="javascript:changeR()" style="text-decoration:none;"> > > > </a>
</span>
</div>
  </body>
</html>
